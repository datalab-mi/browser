{
    "settings": {
        "index" : {
          "similarity" : {
            "my_similarity" : {
              "type" : "BM25" }
          },
            "analysis" : {
                "char_filter":{
                  "my_char_filter":{
                    "type":"mapping"
                  }
                },
                "filter" : {
                    "french_elision": {
                    "type":  "elision",
                    "articles": [
                      "l", "m", "t", "qu", "n", "s",
                      "j", "d", "c", "jusqu", "quoiqu",
                      "lorsqu", "puisqu"
            ]
        },
                    "french_stop": { 
                      "type":       "stop",
                      "stopwords":  "_french_" 
                    },
                    "french_keywords": { 
                      "type":       "keyword_marker",
                      "keywords":   ["Exemple"] 
                    },
                    "french_stemmer": { 
                      "type":       "stemmer",
                      "language":   "light_french"
                    },
                    "synonym_igpn" : {
                        "type" : "synonym"

                                }
                            }
           ,
                  "analyzer": {
                  "rebuilt_french_non_stemmed": {
                    "tokenizer":  "standard",
                    "filter": [
                      "lowercase",
                      "french_elision",
                      "french_stop",
                      "french_keywords"
                    ]
                  },
                  "rebuilt_french_query_non_stemmed": {
                    "tokenizer":  "standard",
                    "filter": [
                      "lowercase",
                      "french_elision",
                      "synonym_igpn",
                      "french_elision",
                      "lowercase",
                      "french_stop",
                      "french_keywords"
                    ]
                  },

                    "rebuilt_french_text": {
                      "tokenizer":  "standard",
                      "filter": [
                        "lowercase",
                        "french_elision",
                        "french_stop",
                        "french_keywords",
                        "french_stemmer"
                      ]
                    },
                    "rebuilt_french_query": {
                      "tokenizer":  "standard",
                      "filter": [
                        "lowercase",
                        "french_elision",
                        "synonym_igpn",
                        "french_elision",
                        "lowercase",
                        "french_stop",
                        "french_keywords",
                        "french_stemmer"
                      ]
                    },
                    "rebuilt_french_reponse": {
                      "tokenizer":  "standard",
                      "char_filter":[
                        "my_char_filter"
                      ],
                      "filter": [
                        "lowercase",
                        "french_elision",
                        "french_stop",
                        "french_keywords",
                        "french_stemmer"
                      ]
                    }
                  }
                
        }
    }
}, 
    "mappings":{
    "properties": {
      "DOMAINE": {
        "type": "text",
        "copy_to":["Domaine non stemmed", "all_text"],
        "similarity" : "my_similarity",
        "analyzer" : "rebuilt_french_reponse",
        "search_analyzer" : "rebuilt_french_query",
        "term_vector" : "with_positions_offsets_payloads"
      },
      "DOMAINE non stemmed": {
        "type": "text",
        "analyzer" : "rebuilt_french_non_stemmed",
        "similarity" : "my_similarity",
        "search_analyzer" : "rebuilt_french_query",
        "term_vector" : "with_positions_offsets_payloads"
      },
      "Date": {
        "type": "text"
      },
      "Liens": {
        "type": "text",
        "similarity" : "my_similarity",
        "analyzer" : "rebuilt_french_text",
          "search_analyzer" : "rebuilt_french_query",
          "term_vector" : "with_positions_offsets_payloads"
      },
      "Mots clés": {
        "type": "text",
        "copy_to":["Mots clés non stemmed","all_text"],
        "similarity" : "my_similarity",
        "analyzer" : "rebuilt_french_reponse",
        "search_analyzer" : "rebuilt_french_query",
        "term_vector" : "with_positions_offsets_payloads"
      },
      "Mots clés non stemmed": {
        "type": "text",
        "copy_to":"Mots clés non stemmed",
        "similarity" : "my_similarity",
        "analyzer" : "rebuilt_french_non_stemmed",
        "search_analyzer" : "rebuilt_french_query_non_stemmed",
        "term_vector" : "with_positions_offsets_payloads"
      },
      "Pièces jointes": {
        "type": "text",
        "similarity" : "my_similarity",
        "analyzer" : "rebuilt_french_text",
          "search_analyzer" : "rebuilt_french_query",
          "term_vector" : "with_positions_offsets_payloads"
      },
      "Question": {
        "type": "text",
        "copy_to":["Question non stemmed", "all_text"],
        "similarity" : "my_similarity",
        "analyzer" : "rebuilt_french_reponse",
          "search_analyzer" : "rebuilt_french_query",
          "term_vector" : "with_positions_offsets_payloads"
      },
      "Question non stemmed": {
        "type": "text",
        "similarity" : "my_similarity",
        "analyzer" : "rebuilt_french_non_stemmed",
          "search_analyzer" : "rebuilt_french_query_non_stemmed",
          "term_vector" : "with_positions_offsets_payloads"
      },
      "Réponse": {
        "type": "text",
        "copy_to":["Réponse non stemmed","all_text"],
        "similarity" : "my_similarity",
        "analyzer" : "rebuilt_french_reponse",
          "search_analyzer" : "rebuilt_french_query",
          "term_vector" : "with_positions_offsets_payloads"
      },
      "Réponse non stemmed": {
        "type": "text",
        "similarity" : "my_similarity",
        "analyzer" : "rebuilt_french_non_stemmed",
          "search_analyzer" : "rebuilt_french_query_non_stemmed",
          "term_vector" : "with_positions_offsets_payloads"
      },
      "TITRE": {
        "type": "text",
        "copy_to":["TITRE non stemmed", "all_text"],
        "similarity" : "my_similarity",
        "analyzer" : "rebuilt_french_reponse",
        "search_analyzer" : "rebuilt_french_query",
        "term_vector" : "with_positions_offsets_payloads"
      },
      "TITRE non stemmed": {
        "type": "text",
        "similarity" : "my_similarity",
        "analyzer" : "rebuilt_french_non_stemmed",
        "search_analyzer" : "rebuilt_french_query_non_stemmed",
        "term_vector" : "with_positions_offsets_payloads"
      },
      "all_text": {
        "type":"text",
        "analyzer" : "french",
        "search_analyzer" : "rebuilt_french_query"
      },
      "Mots clés analysés":{
          "type":"text",
          "similarity" : "my_similarity"
      }
    }
  }
}
